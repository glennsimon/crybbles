const t=document.createElement("div");t.id="container";const e=document.createElement("div");e.id="floor-datum";const n=document.createElement("div");n.id="floor",e.append(n),t.append(e),document.body.append(t);const r=t=>2*Math.PI*t/360,a=t=>360*t/(2*Math.PI),o=Math.min(window.innerWidth,window.innerHeight),s=o,d=5*o/3,i=d,l=d/3,c=[5,9],$=[-o,o],p=[o/5,o/3],b=[6,15],f=[3,10];let m=0,h="incr";const g={},u={},x=[],M=[],y=[],Z=document.createElement("style");Z.type="text/css";document.head.appendChild(Z);let w=0;const B=(t,e,r,a,o,s,d)=>{q(t,e,r);const i=document.createElement("div");i.classList.add("b"+w+"-tran-datum","bubble-tran-datum");const l=document.createElement("div");l.classList.add("b"+w+"-grow-datum");const c=document.createElement("div");switch(c.classList.add("b"+w+"-element"),l.append(c),i.append(l),n.append(i),e){case"cube":for(let t=1;t<7;t++){const e=document.createElement("div");e.classList.add("b"+w+"-cube-face","b"+w+"-cube-face"+t),c.append(e)}break;case"tetra":for(let t=1;t<5;t++){const e=document.createElement("div");e.classList.add("b"+w+"-tet-face","b"+w+"-tet-face"+t),c.append(e)}break;case"dodec":for(let t=1;t<13;t++){const e=document.createElement("div");e.classList.add("b"+w+"-dod-face","b"+w+"-dod-face"+t.toString(16).toUpperCase()),c.append(e)}}if(S(t,a,o,s,d),w++,w>1.5*u.numberOfBubbles){for(bEng of M)clearInterval(bEng);setTimeout(Q,250)}},E="-tran-datum",T="-grow-datum",k="-element",C="-cube-face",P="-tet-face",H="-dod-face",L="background: radial-gradient(circle at center, transparent 0, ",q=(t,e,n)=>{let o,s,d,i,l,c;switch(e){case"cube":s=Math.sqrt(3*(n/2)**2),d=n/2,Z.innerHTML+=`\n.b${w+C} {\nwidth: ${n}px;\nheight: ${n}px;\nleft: ${s-d};\ntop: ${s-d};\n}\n.b${w+C}1 {\n${L+W(U(),127)}70 100%);\ntransform: translateZ(${d}px);\n}\n.b${w+C}2 {\n${L+W(U(),127)}70 100%);\ntransform: rotateY(180deg) translateZ(${d}px);\n}\n.b${w+C}3 {\n${L+W(U(),127)}70 100%);\ntransform: rotateY(90deg) translateZ(${d}px);\n}\n.b${w+C}4 {\n${L+W(U(),127)}70 100%);\ntransform: rotateY(-90deg) translateZ(${d}px);\n}\n.b${w+C}5 {\n${L+W(U(),127)}70 100%);\ntransform: rotateX(90deg) translateZ(${d}px);\n}\n.b${w+C}6 {\n${L+W(U(),127)}70 100%);\ntransform: rotateX(-90deg) translateZ(${d}px);\n}`;break;case"tetra":o=1.6*n,i=o/Math.sqrt(3),l=i/2,c=Math.asin(l/(l+i));let t=Math.PI/2-c,e=i/Math.cos(c);d=(i+l)*Math.cos(c)-e,s=Math.sqrt(d**2+i**2),Z.innerHTML+=`\n.b${w+P} {\nwidth: 100%;\nheight: 100%;\nposition: absolute;\nclip-path: polygon(50% ${s+i}px,\n${s-o/2}px ${s-l}px,\n${s+o/2}px ${s-l}px);\ntransform-origin: 50% 50%;\n}\n.b${w+P}1 {\n${L+W(U(),127)}70 70%);\ntransform: translateZ(-${d}px);\n}\n.b${w+P}2 {\n${L+W(U(),127)}70 70%);\ntransform: rotateX(${a(t)}deg) translateZ(${d}px);\n}\n.b${w+P}3 {\n${L+W(U(),127)}70 70%);\ntransform: rotate3d(-0.5, ${Math.sqrt(3)/2}, 0, ${a(t)}deg) translateZ(${d}px);\n}\n.b${w+P}4 {\n${L+W(U(),127)}70 70%);\ntransform: rotate3d(0.5, ${Math.sqrt(3)/2}, 0, -${a(t)}deg) translateZ(${d}px);\n}`;break;case"dodec":l=.42*n;let $=54,p=72,b=l*Math.cos(r(p/2)),f=2*l*Math.sin(r(p/2)),m=2*l*Math.sin(r(p)),h=f*Math.sin(r(180-2*$));i=(m-f)/2/Math.cos(r($));let g=i*Math.sin(r($));c=Math.PI/2-Math.asin(g/h);let u=a(c);d=b/Math.tan(c/2),s=Math.sqrt(l**2+d**2),Z.innerHTML+=`\n.b${w+H} {\nwidth: 100%;\nheight: 100%;\nclip-path: polygon(${s}px ${s-l}px,\n${s+m/2}px ${s-(h-b)}px,\n${s+f/2}px ${s+b}px,\n${s-f/2}px ${s+b}px,\n${s-m/2}px ${s-(h-b)}px);\ntransform-origin: 50% 50%;\n}\n.b${w+H}1 {\n${L+W(U(),127)}80 70%);\ntransform: translateZ(${d}px);\n}\n.b${w+H}2 {\n${L+W(U(),127)}80 70%);\ntransform: rotate3d(1, 0, 0, -${u}deg) rotateZ(36deg) translateZ(${d}px);\n}\n.b${w+H}3 {\n${L+W(U(),127)}80 70%);\ntransform: rotate3d(${Math.cos(r(72))}, ${Math.sin(r(72))}, 0, -${u}deg) rotateZ(36deg) translateZ(${d}px);\n}\n.b${w+H}4 {\n${L+W(U(),127)}80 70%);\ntransform: rotate3d(-${Math.cos(r(36))}, ${Math.sin(r(36))}, 0, -${u}deg) rotateZ(36deg) translateZ(${d}px);\n}\n.b${w+H}5 {\n${L+W(U(),127)}80 70%);\ntransform: rotate3d(-${Math.cos(r(36))}, -${Math.sin(r(36))}, 0, -${u}deg) rotateZ(36deg) translateZ(${d}px);\n}\n.b${w+H}6 {\n${L+W(U(),127)}80 70%);\ntransform: rotate3d(${Math.cos(r(72))}, -${Math.sin(r(72))}, 0, -${u}deg) rotateZ(36deg) translateZ(${d}px);\n}\n.b${w+H}7 {\n${L+W(U(),127)}80 70%);\ntransform: rotate3d(1, 0, 0, -${180+u}deg) rotateZ(36deg) translateZ(${d}px);\n}\n.b${w+H}8 {\n${L+W(U(),127)}80 70%);\ntransform: rotate3d(${Math.cos(r(72))}, ${Math.sin(r(72))}, 0, -${180+u}deg) rotateZ(36deg) translateZ(${d}px);\n}\n.b${w+H}9 {\n${L+W(U(),127)}80 70%);\ntransform: rotate3d(-${Math.cos(r(36))}, ${Math.sin(r(36))}, 0, -${180+u}deg) rotateZ(36deg) translateZ(${d}px);\n}\n.b${w+H}A {\n${L+W(U(),127)}80 70%);\ntransform: rotate3d(-${Math.cos(r(36))}, -${Math.sin(r(36))}, 0, -${180+u}deg) rotateZ(36deg) translateZ(${d}px);\n}\n.b${w+H}B {\n${L+W(U(),127)}80 70%);\ntransform: rotate3d(${Math.cos(r(72))}, -${Math.sin(r(72))}, 0, -${180+u}deg) rotateZ(36deg) translateZ(${d}px);\n}\n.b${w+H}C {\n${L+W(U(),127)}80 70%);\ntransform: rotate3d(1, 0, 0, 180deg) translateZ(${d}px);\n}`}Z.innerHTML+=`\n.b${w+E} {\nwidth: ${2*s}px;\nheight: ${2*s}px;\nleft: ${x[t].location[0]-s}px;\ntop: ${x[t].location[1]-s}px;\ntransform-style: preserve-3d;\n}\n.b${w+T} {\nwidth: ${2*s}px;\nheight: ${2*s}px;\ntransform-style: preserve-3d;\n}\n.b${w+k} {\nwidth: ${2*s}px;\nheight: ${2*s}px;\ntransform-style: preserve-3d;\n}`},A=[],I=[],R=[],S=(t,e,n,r,a)=>{A.push(document.querySelector(`.b${w+E}`).animate([{transform:`translateZ(${2*s}px)`,left:`${x[t].location[0]+n}px`}],{fill:"forwards",easing:"ease-in",duration:1e3*r})),I.push(document.querySelector(`.b${w+T}`).animate([{transform:"scale3d(0.1, 0.1, 0.1)",offset:0},{transform:"scale3d(0.5, 0.5, 0.5)",offset:.033},{transform:"scale3d(1, 1, 1)",offset:.333}],{fill:"forwards",duration:1e3*r})),R.push(document.querySelector(`.b${w+k}`).animate([{transform:`rotate3d(${e[0]}, ${e[1]}, ${e[2]}, 0deg)`},{transform:`rotate3d(${e[0]}, ${e[1]}, ${e[2]}, 360deg)`}],{duration:1e3*a,iterations:1/0}))},X=()=>{0!==u.floorRotPeriod&&document.querySelector("#floor").animate([{transform:"rotateZ(360deg)"}],{duration:1e3*u.floorRotPeriod,iterations:1/0})},O=(t,e)=>{const n=g.fracArray[Y()];return Math.floor((1-n)*t+n*(e+1))},N=(t,e)=>{const n=g.fracArray[Y()]+.5/256;return(1-n)*t+n*e},Y=()=>(m===g.fracArray.length-1?h="decr":0===m&&(h="incr"),"incr"===h?m++:m--),z=()=>{u.floorRotPeriod=15*O(0,3);const t=O(1,3);let e=["cube","tetra","dodec"];3!==t&&e.splice(O(-1,1),1),1===t&&e.splice(O(0,1),1),u.bubbleTypes=e,u.spinPause=O(1,5)<5,u.perspective=N(.9,2)*o,u.angle=O(70,90),u.numberOfBubbles=O(c[0],c[1]),u.bgBaseColor=W(U(),-100)},D=t=>{const e=[],n=[],r=t.slice(2);for(let t=0;t<63;t++){const a=r.slice(t,t+2);e[t]=a,n[t]=parseInt(a,16)/256}g.hexArray=e,g.fracArray=n},U=()=>{let t="#";for(let e=0;e<3;e++)t+=g.hexArray[Y()];return t},W=(t,e)=>{t=t.slice(1);let n="#";for(;t.length>1;){let r=parseInt(t.substring(0,2),16)+e;r=r>255?255:r<0?0:r,tempColorHex=r.toString(16),n+=2===tempColorHex.length?tempColorHex:"0"+tempColorHex,t=t.slice(2)}return n},j=()=>{const t=u.numberOfBubbles,e=d/2,n=i/2,a=N(r(-45),r(45)),o=r(360/t);let s=[];for(let r=0;r<t;r++){const t=O(l/4,l),d=a+r*o;s.push([e+t*Math.sin(d),n+t*Math.cos(d)])}for(let e=0;e<t;e++)x[e]={},x[e].bubbleType=u.bubbleTypes[e%u.bubbleTypes.length],x[e].location=s[e]};async function F(){const t=u.numberOfBubbles,e=N($[0],$[1]);0!==u.floorRotPeriod&&document.querySelector("#floor").animate([{transform:"rotateZ(360deg)"}],{duration:1e3*u.floorRotPeriod,iterations:1/0});for(let n=0;n<t;n++){const t=O(p[0],p[1]),r=O(b[0],b[1]),a=[g.fracArray[Y()],g.fracArray[Y()],g.fracArray[Y()]],o=N(f[0],f[1]),d=r*O(2*t,3*t)*1e3/(2*s/3*1.72),i=x[n].bubbleType;B(n,i,t,a,e,r,o),M[w]=setInterval(B,d,n,i,t,a,e,r,o),await new Promise((t=>setTimeout(t,1500*g.fracArray[Y()])))}}const G=()=>{const e=document.getElementsByClassName("bubble-tran-datum"),n=t.getBoundingClientRect();for(let t=0;t<e.length;t++){e[t].className.split(" ")[0];if(!y.includes(e[t])){const r=e[t].children[0].children[0].children;for(let a=0;a<r.length;a++){const o=r[a].getBoundingClientRect(),s=r[a].clientHeight;if(o.top+Math.min(o.height,s)>n.top&&o.top<n.bottom){y.push(e[t]);break}}}}},J=()=>{clearInterval(K);const t=document.getElementsByClassName("bubble-tran-datum");for(bubble of t)y.includes(bubble)||bubble.remove()};let K;const Q=()=>{for(const t of A)t.pause();for(const t of I)t.pause();if(u.spinPause)for(const t of R)t.pause();K=setInterval(G,1e3),setTimeout(J,1e3*(u.floorRotPeriod+1))},V=t=>{var e;D(t),z(),e=u.bgBaseColor,Z.innerHTML=`\n* {box-sizing: border-box;position: absolute;}\nbody {margin: 0;padding: 0;}\n#container {\npadding: 0;\nmargin: auto;\ndisplay: block;\nwidth: ${o}px;\nheight: ${s}px;\ntop: 0;\nleft: 0;\noverflow: hidden;\nperspective: ${u.perspective}px;\nbackground: radial-gradient(circle at bottom,\n${W(e,100)},\n${e});\n}\n#floor-datum {\nwidth: ${d}px;\nheight: ${i}px;\nleft: -${o/3}px;\ntransform-style: preserve-3d;\ntransform: rotateX(${u.angle}deg);\n}\n#floor {\nwidth: ${d}px;\nheight: ${i}px;\nbackground: radial-gradient(circle at center,\n${W(e,50)}B0,\n${e}B0 70.7%, transparent 70.7%);\ntransform-style: preserve-3d;\n}`,j(),F()};V(tokenData.hash);