<html>
  <head>
    <script>
      let bigNum = '0x';
      let tokenData;

      for (let i = 0; i < 8; i++) {
        let num = Math.round(Math.random() * parseInt('FFFFFFFF', 16)).toString(
          16
        );
        while (num.length < 8) {
          num = '0' + num;
        }
        bigNum += num;
      }

      tokenData = { hash: bigNum, tokenId: '8000976' };
      // tokenData = { 'hash': '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff', 'tokenId': '8000976' }
      // tokenData = { 'hash': '0x0000000000000000000000000000000000000000000000000000000000000000', 'tokenId': '8000976' }
      // tokenData = { 'hash': '0x0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f', 'tokenId': '8000976' }
      // tokenData = { 'hash': '0xf0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0', 'tokenId': '8000976' }
      // tokenData = { 'hash': '0xff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00', 'tokenId': '8000976' }
      // tokenData = { 'hash': '0x00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff', 'tokenId': '8000976' }
      // tokenData = { 'hash': '0xb8eb7ea2d24c05e61ff504eb21adbdd85d34c4c65e337645ff930bf831479122', 'tokenId': '8000976' }
    </script>
  </head>
  <body>
    <div id="container">
      <div id="floor-datum">
        <div id="floor"></div>
      </div>
    </div>
    <script>
const n=n=>2*Math.PI*n/360,t=n=>360*n/(2*Math.PI),e=Math.min(window.innerWidth,window.innerHeight)-20,a=e,r=5*e/3,o=r,i=r/3,s=[5,9],d=[-e,e],c=[e/6,e/3],l=[6,15],$=[3,10];let p=0,b="incr";const f={},g={},m=[],h=[],u=[],x=document.createElement("style"),y=(n,t)=>{x.innerHTML=`\n* {\n  box-sizing: border-box;\n  position: absolute;\n}\nbody {\n  margin: 0;\n  padding: 0;\n}\n#container {\n  position: fixed;\n  width: ${e}px;\n  height: ${a}px;\n  top: 50%;\n  left: 50%;\n  margin-top: -${e/2}px;\n  margin-left: -${e/2}px;\n  overflow: hidden;\n  perspective: ${.9*e}px;\n  background: radial-gradient(circle at bottom,\n    ${E(n,t)},\n    ${n});\n}\n#floor-datum {\n  width: ${r}px;\n  height: ${o}px;\n  left: -${e/3}px;\n  transform-style: preserve-3d;\n  transform: rotateX(90deg);\n}\n#floor {\n  width: ${r}px;\n  height: ${o}px;\n  background: radial-gradient(circle at center,\n    ${E(n,t)}B0,\n    ${n}B0 70.7%, transparent 70.7%);\n  transform-style: preserve-3d;\n  animation: floor-rot ${g.floorRotPeriod}s linear infinite;\n}`};document.head.appendChild(x);const M=n=>{const t=document.getElementById("floor"),e=document.createElement("div");e.classList.add("b"+n+"-tran-datum","bubble-tran-datum");const a=document.createElement("div");a.classList.add("b"+n+"-grow-datum");const r=document.createElement("div");switch(r.classList.add("b"+n+"-element"),a.append(r),e.append(a),t.append(e),m[n].bubbleType){case"cube":for(let t=1;t<7;t++){const e=document.createElement("div");e.classList.add("b"+n+"-cube-face","b"+n+"-cube-face"+t),r.append(e)}break;case"tetra":for(let t=1;t<5;t++){const e=document.createElement("div");e.classList.add("b"+n+"-tetra-face","b"+n+"-tet-face"+t),r.append(e)}break;case"dodec":for(let t=1;t<13;t++){const e=document.createElement("div");e.classList.add("b"+n+"-dodec-face","b"+n+"-dod-face"+t.toString(16).toUpperCase()),r.append(e)}}e.addEventListener("animationend",(()=>e.remove()))},w=(t,e,r,o,i,s,d)=>{let c,l,$,p,b,f;switch(m[t].bubbleType){case"cube":l=Math.sqrt(3*(e/2)**2),$=e/2,x.innerHTML+=`\n.b${t}-tran-datum {\n  width: ${2*l}px;\n  height: ${2*l}px;\n  left: ${m[t].location[0]-l}px;\n  top: ${m[t].location[1]-l}px;\n  transform-style: preserve-3d;\n  animation: b${t}-translate ${o}s ease-in forwards;\n}\n.b${t}-grow-datum {\n  width: ${2*l}px;\n  height: ${2*l}px;\n  transform-style: preserve-3d;\n  animation: b${t}-size ${o}s linear forwards;\n}\n.b${t}-element {\n  width: ${2*l}px;\n  height: ${2*l}px;\n  transform-style: preserve-3d;\n  animation: b${t}-spin ${s}s linear infinite;\n}\n.b${t}-cube-face {\n  width: ${e}px;\n  height: ${e}px;\n  left: ${l-$};\n  top: ${l-$};\n  backface-visibility: inherit;\n}\n.b${t}-cube-face1 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}70 100%);\n  transform: translateZ(${$}px);\n}\n.b${t}-cube-face2 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}70 100%);\n  transform: rotateY(180deg) translateZ(${$}px);\n}\n.b${t}-cube-face3 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}70 100%);\n  transform: rotateY(90deg) translateZ(${$}px);\n}\n.b${t}-cube-face4 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}70 100%);\n  transform: rotateY(-90deg) translateZ(${$}px);\n}\n.b${t}-cube-face5 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}70 100%);\n  transform: rotateX(90deg) translateZ(${$}px);\n}\n.b${t}-cube-face6 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}70 100%);\n  transform: rotateX(-90deg) translateZ(${$}px);\n}`;break;case"tetra":c=1.6*e,p=c/Math.sqrt(3),b=p/2,f=Math.asin(b/(b+p));let a=Math.PI/2-f,r=p/Math.cos(f);$=(p+b)*Math.cos(f)-r,l=Math.sqrt($**2+p**2),x.innerHTML+=`\n.b${t}-tran-datum {\n  width: ${2*l}px;\n  height: ${2*l}px;\n  left: ${m[t].location[0]-l}px;\n  top: ${m[t].location[1]-l}px;\n  transform-style: preserve-3d;\n  animation: b${t}-translate ${o}s ease-in forwards;\n}\n.b${t}-grow-datum {\n  width: ${2*l}px;\n  height: ${2*l}px;\n  transform-style: preserve-3d;\n  animation: b${t}-size ${o}s linear forwards;\n}\n.b${t}-element {\n  width: ${2*l}px;\n  height: ${2*l}px;\n  transform-style: preserve-3d;\n  animation: b${t}-spin ${s}s linear infinite;\n}\n.b${t}-tetra-face {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  backface-visibility: inherit;\n  clip-path: polygon(50% ${l+p}px,\n    ${l-c/2}px ${l-b}px,\n    ${l+c/2}px ${l-b}px);\n  transform-origin: 50% 50%;\n}\n.b${t}-tet-face1 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}70 70%);\n  transform: translateZ(-${$}px);\n}\n.b${t}-tet-face2 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}70 70%);\n  transform: rotateX(${360*a/(2*Math.PI)}deg) translateZ(${$}px);\n}\n.b${t}-tet-face3 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}70 70%);\n  transform: rotate3d(-0.5, ${Math.sqrt(3)/2}, 0, ${360*a/(2*Math.PI)}deg) translateZ(${$}px);\n}\n.b${t}-tet-face4 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}70 70%);\n  transform: rotate3d(0.5, ${Math.sqrt(3)/2}, 0, -${360*a/(2*Math.PI)}deg) translateZ(${$}px);\n}`;break;case"dodec":b=.42*e;let i=54,d=72,g=b*Math.cos(n(d/2)),h=2*b*Math.sin(n(d/2)),u=2*b*Math.sin(n(d)),y=h*Math.sin(n(180-2*i));p=(u-h)/2/Math.cos(n(i));let M=p*Math.sin(n(i));f=Math.PI/2-Math.asin(M/y);let w=360*f/(2*Math.PI);$=g/Math.tan(f/2),l=Math.sqrt(b**2+$**2),x.innerHTML+=`\n.b${t}-tran-datum {\n  width: ${2*l}px;\n  height: ${2*l}px;\n  left: ${m[t].location[0]-l}px;\n  top: ${m[t].location[1]-l}px;\n  transform-style: preserve-3d;\n  animation: b${t}-translate ${o}s ease-in forwards;\n}\n.b${t}-grow-datum {\n  width: ${2*l}px;\n  height: ${2*l}px;\n  transform-style: preserve-3d;\n  animation: b${t}-size ${o}s linear forwards;\n}\n.b${t}-element {\n  width: ${2*l}px;\n  height: ${2*l}px;\n  transform-style: preserve-3d;\n  animation: b${t}-spin ${s}s linear infinite;\n}\n.b${t}-dodec-face {\n  width: 100%;\n  height: 100%;\n  backface-visibility: inherit;\n  clip-path: polygon(${l}px ${l-b}px,\n    ${l+u/2}px ${l-(y-g)}px,\n    ${l+h/2}px ${l+g}px,\n    ${l-h/2}px ${l+g}px,\n    ${l-u/2}px ${l-(y-g)}px);\n  transform-origin: 50% 50%;\n}\n.b${t}-dod-face1 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: translateZ(${$}px);\n}\n.b${t}-dod-face2 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: rotate3d(1, 0, 0, -${w}deg) rotateZ(36deg) translateZ(${$}px);\n}\n.b${t}-dod-face3 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: rotate3d(${Math.cos(n(72))}, ${Math.sin(n(72))}, 0, -${w}deg) rotateZ(36deg) translateZ(${$}px);\n}\n.b${t}-dod-face4 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: rotate3d(-${Math.cos(n(36))}, ${Math.sin(n(36))}, 0, -${w}deg) rotateZ(36deg) translateZ(${$}px);\n}\n.b${t}-dod-face5 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: rotate3d(-${Math.cos(n(36))}, -${Math.sin(n(36))}, 0, -${w}deg) rotateZ(36deg) translateZ(${$}px);\n}\n.b${t}-dod-face6 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: rotate3d(${Math.cos(n(72))}, -${Math.sin(n(72))}, 0, -${w}deg) rotateZ(36deg) translateZ(${$}px);\n}\n.b${t}-dod-face7 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: rotate3d(1, 0, 0, -${180+w}deg) rotateZ(36deg) translateZ(${$}px);\n}\n.b${t}-dod-face8 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: rotate3d(${Math.cos(n(72))}, ${Math.sin(n(72))}, 0, -${180+w}deg) rotateZ(36deg) translateZ(${$}px);\n}\n.b${t}-dod-face9 {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: rotate3d(-${Math.cos(n(36))}, ${Math.sin(n(36))}, 0, -${180+w}deg) rotateZ(36deg) translateZ(${$}px);\n}\n.b${t}-dod-faceA {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: rotate3d(-${Math.cos(n(36))}, -${Math.sin(n(36))}, 0, -${180+w}deg) rotateZ(36deg) translateZ(${$}px);\n}\n.b${t}-dod-faceB {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: rotate3d(${Math.cos(n(72))}, -${Math.sin(n(72))}, 0, -${180+w}deg) rotateZ(36deg) translateZ(${$}px);\n}\n.b${t}-dod-faceC {\n  background: radial-gradient(circle at center,\n      transparent 0, ${E(P(),127)}80 70%);\n  transform: rotate3d(1, 0, 0, 180deg) translateZ(${$}px);\n}`}x.innerHTML+=`\n@keyframes b${t}-spin { \n  from { transform: rotate3d(${i[0]}, ${i[1]}, ${i[2]}, 0deg); }\n  to { transform: rotate3d(${i[0]}, ${i[1]}, ${i[2]}, 360deg); }\n}\n@keyframes floor-rot { \n  to { transform: rotateZ(360deg); }\n}\n@keyframes b${t}-translate { \n  to {\n    transform: translateZ(${2*a}px);\n    left: ${m[t].location[0]+r}px;\n  }\n}\n@keyframes b${t}-size { \n  0% { transform: scale3d(0.1, 0.1, 0.1); }\n  3.3% { transform: scale3d(0.5, 0.5, 0.5); }\n  33.3% { transform: scale3d(1, 1, 1); }\n}`},k=(n,t)=>{const e=f.fracArray[Z()];return Math.floor((1-e)*n+e*(t+1))},v=(n,t)=>{const e=f.fracArray[Z()]+.5/256;return(1-e)*n+e*t},Z=()=>(p===f.fracArray.length-1?b="decr":0===p&&(b="incr"),"incr"===b?p++:p--),B=()=>{g.numberOfBubbles=k(s[0],s[1]),g.floorRotPeriod=15*k(0,3),g.bubbleTypes=k(1,3)},I=n=>{const t=[],e=[],a=n.slice(2);for(let n=0;n<63;n++){const r=a.slice(n,n+2);t[n]=r,e[n]=parseInt(r,16)/256}f.hexArray=t,f.fracArray=e},P=()=>{let n="#";for(let t=0;t<3;t++){let t=f.hexArray[Z()];n+=2===t.length?t:"0"+t}return n},E=(n,t)=>{n=n.slice(1);let e="#";for(;n.length>1;){let a=parseInt(n.substring(0,2),16)+t;a=a>255?255:a<0?0:a,tempColorHex=a.toString(16),e+=2===tempColorHex.length?tempColorHex:"0"+tempColorHex,n=n.slice(2)}return e},T=()=>{const t=g.numberOfBubbles,e=r/2,a=o/2,s=v(n(-45),n(45)),d=n(360/t);let c=[];for(let n=0;n<t;n++){const t=k(i/4,i),r=s+n*d;c.push([e+t*Math.sin(r),a+t*Math.cos(r)])}let l=["cube","tetra","dodec"];3!==g.bubbleTypes&&l.splice(k(-1,1),1),1===g.bubbleTypes&&l.splice(k(0,1),1);for(let n=0;n<t;n++)m[n]={},m[n].bubbleType=l[n%l.length],m[n].location=c[n];console.log("nucleusData populated.")};async function C(){const n=g.numberOfBubbles,t=v(d[0],d[1]);setTimeout(z,1e4);for(let e=0;e<n;e++){const n=k(c[0],c[1]),r=k(l[0],l[1]),o=[f.fracArray[Z()],f.fracArray[Z()],f.fracArray[Z()]],i=v($[0],$[1]);w(e,n,t,r,o,i);const s=r*k(2*n,3*n)*1e3/(2*a/3*1.72);M(e),h[e]=setInterval(M,s,e),await new Promise((n=>setTimeout(n,1500*f.fracArray[Z()])))}}const L=()=>{const n=document.getElementsByClassName("bubble-tran-datum"),t=document.getElementById("container").getBoundingClientRect();for(let e=0;e<n.length;e++){n[e].className.split(" ")[0];if(!u.includes(n[e])){const a=n[e].children[0].children[0].children;for(let r=0;r<a.length;r++){const o=a[r].getBoundingClientRect(),i=a[r].clientHeight;if(o.top+Math.min(o.height,i)>t.top&&o.top<t.bottom){u.push(n[e]);break}}}}},H=()=>{clearInterval(A);const n=[...document.getElementsByClassName("bubble-tran-datum")];for(bubble of n)u.includes(bubble)||bubble.remove()};let A;const z=()=>{const n=k(1,5)<5;for(let t=0;t<g.numberOfBubbles;t++){clearInterval(h[t]);let e=document.body.getElementsByClassName("b"+t+"-tran-datum");document.getElementById("container");for(const n of e)n.style.animationPlayState="paused";e=document.body.getElementsByClassName("b"+t+"-grow-datum");for(const n of e)n.style.animationPlayState="paused";if(n){e=document.body.getElementsByClassName("b"+t+"-element");for(const n of e)n.style.animationPlayState="paused"}}A=setInterval(L,1e3),setTimeout(H,1e3*(g.floorRotPeriod+1))},R=n=>{I(n),g.numberOfBubbles=k(s[0],s[1]),g.floorRotPeriod=15*k(0,3),g.bubbleTypes=k(1,3);const t=E(P(),-127);var i,d;i=t,d=50,x.innerHTML=`\n* {\n  box-sizing: border-box;\n  position: absolute;\n}\nbody {\n  margin: 0;\n  padding: 0;\n}\n#container {\n  position: fixed;\n  width: ${e}px;\n  height: ${a}px;\n  top: 50%;\n  left: 50%;\n  margin-top: -${e/2}px;\n  margin-left: -${e/2}px;\n  overflow: hidden;\n  perspective: ${.9*e}px;\n  background: radial-gradient(circle at bottom,\n    ${E(i,d)},\n    ${i});\n}\n#floor-datum {\n  width: ${r}px;\n  height: ${o}px;\n  left: -${e/3}px;\n  transform-style: preserve-3d;\n  transform: rotateX(90deg);\n}\n#floor {\n  width: ${r}px;\n  height: ${o}px;\n  background: radial-gradient(circle at center,\n    ${E(i,d)}B0,\n    ${i}B0 70.7%, transparent 70.7%);\n  transform-style: preserve-3d;\n  animation: floor-rot ${g.floorRotPeriod}s linear infinite;\n}`,T(),C()};R(tokenData.hash),window.onresize=()=>location.reload();
    </script>
  </body>
</html>
