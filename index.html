<html>
  <head>
    <script>
      let bigNum = '0x';
      let tokenData;

      for (let i = 0; i < 8; i++) {
        let num = Math.round(Math.random() * parseInt('FFFFFFFF', 16)).toString(
          16
        );
        while (num.length < 8) {
          num = '0' + num;
        }
        bigNum += num;
      }

      tokenData = { hash: bigNum, tokenId: '123000456' };
    </script>
  </head>
  <body>
    <script>
const t=document.createElement("div");t.id="container";const n=document.createElement("div");n.id="floor-datum";const e=document.createElement("div");e.id="floor",n.append(e),t.append(n),document.body.append(t);const a=t=>2*Math.PI*t/360,r=t=>360*t/(2*Math.PI),o=Math.min(window.innerWidth,window.innerHeight)-20,s=o,i=5*o/3,d=i,l=i/3,$=[5,9],c=[-o,o],p=[o/6,o/3],b=[6,15],m=[3,10];let f=0,h="incr";const g={},u={},x=[],y=[],M=[],Z=document.createElement("style");Z.type="text/css";document.head.appendChild(Z);const v=t=>{const n=document.createElement("div");n.classList.add("b"+t+"-tran-datum","bubble-tran-datum");const a=document.createElement("div");a.classList.add("b"+t+"-grow-datum");const r=document.createElement("div");switch(r.classList.add("b"+t+"-element"),a.append(r),n.append(a),e.append(n),x[t].bubbleType){case"cube":for(let n=1;n<7;n++){const e=document.createElement("div");e.classList.add("b"+t+"-cube-face","b"+t+"-cube-face"+n),r.append(e)}break;case"tetra":for(let n=1;n<5;n++){const e=document.createElement("div");e.classList.add("b"+t+"-tet-face","b"+t+"-tet-face"+n),r.append(e)}break;case"dodec":for(let n=1;n<13;n++){const e=document.createElement("div");e.classList.add("b"+t+"-dod-face","b"+t+"-dod-face"+n.toString(16).toUpperCase()),r.append(e)}}},B="-tran-datum",C="-grow-datum",T="-element",k="-cube-face",E="-tet-face",P="-dod-face",H="background: radial-gradient(circle at center, transparent 0, ",L=(t,n,e,o,i,d,l)=>{let $,c,p,b,m,f;switch(x[t].bubbleType){case"cube":c=Math.sqrt(3*(n/2)**2),p=n/2,Z.innerHTML+=`\n.b${t+k} {\nwidth: ${n}px;\nheight: ${n}px;\nleft: ${c-p};\ntop: ${c-p};\n}\n.b${t+k}1 {\n${H+S(z(),127)}70 100%);\ntransform: translateZ(${p}px);\n}\n.b${t+k}2 {\n${H+S(z(),127)}70 100%);\ntransform: rotateY(180deg) translateZ(${p}px);\n}\n.b${t+k}3 {\n${H+S(z(),127)}70 100%);\ntransform: rotateY(90deg) translateZ(${p}px);\n}\n.b${t+k}4 {\n${H+S(z(),127)}70 100%);\ntransform: rotateY(-90deg) translateZ(${p}px);\n}\n.b${t+k}5 {\n${H+S(z(),127)}70 100%);\ntransform: rotateX(90deg) translateZ(${p}px);\n}\n.b${t+k}6 {\n${H+S(z(),127)}70 100%);\ntransform: rotateX(-90deg) translateZ(${p}px);\n}`;break;case"tetra":$=1.6*n,b=$/Math.sqrt(3),m=b/2,f=Math.asin(m/(m+b));let e=Math.PI/2-f,o=b/Math.cos(f);p=(b+m)*Math.cos(f)-o,c=Math.sqrt(p**2+b**2),Z.innerHTML+=`\n.b${t+E} {\nwidth: 100%;\nheight: 100%;\nposition: absolute;\nclip-path: polygon(50% ${c+b}px,\n${c-$/2}px ${c-m}px,\n${c+$/2}px ${c-m}px);\ntransform-origin: 50% 50%;\n}\n.b${t+E}1 {\n${H+S(z(),127)}70 70%);\ntransform: translateZ(-${p}px);\n}\n.b${t+E}2 {\n${H+S(z(),127)}70 70%);\ntransform: rotateX(${r(e)}deg) translateZ(${p}px);\n}\n.b${t+E}3 {\n${H+S(z(),127)}70 70%);\ntransform: rotate3d(-0.5, ${Math.sqrt(3)/2}, 0, ${r(e)}deg) translateZ(${p}px);\n}\n.b${t+E}4 {\n${H+S(z(),127)}70 70%);\ntransform: rotate3d(0.5, ${Math.sqrt(3)/2}, 0, -${r(e)}deg) translateZ(${p}px);\n}`;break;case"dodec":m=.42*n;let s=54,i=72,d=m*Math.cos(a(i/2)),l=2*m*Math.sin(a(i/2)),h=2*m*Math.sin(a(i)),g=l*Math.sin(a(180-2*s));b=(h-l)/2/Math.cos(a(s));let u=b*Math.sin(a(s));f=Math.PI/2-Math.asin(u/g);let x=r(f);p=d/Math.tan(f/2),c=Math.sqrt(m**2+p**2),Z.innerHTML+=`\n.b${t+P} {\nwidth: 100%;\nheight: 100%;\nclip-path: polygon(${c}px ${c-m}px,\n${c+h/2}px ${c-(g-d)}px,\n${c+l/2}px ${c+d}px,\n${c-l/2}px ${c+d}px,\n${c-h/2}px ${c-(g-d)}px);\ntransform-origin: 50% 50%;\n}\n.b${t+P}1 {\n${H+S(z(),127)}80 70%);\ntransform: translateZ(${p}px);\n}\n.b${t+P}2 {\n${H+S(z(),127)}80 70%);\ntransform: rotate3d(1, 0, 0, -${x}deg) rotateZ(36deg) translateZ(${p}px);\n}\n.b${t+P}3 {\n${H+S(z(),127)}80 70%);\ntransform: rotate3d(${Math.cos(a(72))}, ${Math.sin(a(72))}, 0, -${x}deg) rotateZ(36deg) translateZ(${p}px);\n}\n.b${t+P}4 {\n${H+S(z(),127)}80 70%);\ntransform: rotate3d(-${Math.cos(a(36))}, ${Math.sin(a(36))}, 0, -${x}deg) rotateZ(36deg) translateZ(${p}px);\n}\n.b${t+P}5 {\n${H+S(z(),127)}80 70%);\ntransform: rotate3d(-${Math.cos(a(36))}, -${Math.sin(a(36))}, 0, -${x}deg) rotateZ(36deg) translateZ(${p}px);\n}\n.b${t+P}6 {\n${H+S(z(),127)}80 70%);\ntransform: rotate3d(${Math.cos(a(72))}, -${Math.sin(a(72))}, 0, -${x}deg) rotateZ(36deg) translateZ(${p}px);\n}\n.b${t+P}7 {\n${H+S(z(),127)}80 70%);\ntransform: rotate3d(1, 0, 0, -${180+x}deg) rotateZ(36deg) translateZ(${p}px);\n}\n.b${t+P}8 {\n${H+S(z(),127)}80 70%);\ntransform: rotate3d(${Math.cos(a(72))}, ${Math.sin(a(72))}, 0, -${180+x}deg) rotateZ(36deg) translateZ(${p}px);\n}\n.b${t+P}9 {\n${H+S(z(),127)}80 70%);\ntransform: rotate3d(-${Math.cos(a(36))}, ${Math.sin(a(36))}, 0, -${180+x}deg) rotateZ(36deg) translateZ(${p}px);\n}\n.b${t+P}A {\n${H+S(z(),127)}80 70%);\ntransform: rotate3d(-${Math.cos(a(36))}, -${Math.sin(a(36))}, 0, -${180+x}deg) rotateZ(36deg) translateZ(${p}px);\n}\n.b${t+P}B {\n${H+S(z(),127)}80 70%);\ntransform: rotate3d(${Math.cos(a(72))}, -${Math.sin(a(72))}, 0, -${180+x}deg) rotateZ(36deg) translateZ(${p}px);\n}\n.b${t+P}C {\n${H+S(z(),127)}80 70%);\ntransform: rotate3d(1, 0, 0, 180deg) translateZ(${p}px);\n}`}Z.innerHTML+=`\n.b${t+B} {\nwidth: ${2*c}px;\nheight: ${2*c}px;\nleft: ${x[t].location[0]-c}px;\ntop: ${x[t].location[1]-c}px;\ntransform-style: preserve-3d;\nanimation: b${t}-translate ${o}s ease-in forwards;\n}\n.b${t+C} {\nwidth: ${2*c}px;\nheight: ${2*c}px;\ntransform-style: preserve-3d;\nanimation: b${t}-size ${o}s linear forwards;\n}\n.b${t+T} {\nwidth: ${2*c}px;\nheight: ${2*c}px;\ntransform-style: preserve-3d;\nanimation: b${t}-spin ${d}s linear infinite;\n}`,Z.innerHTML+=`\n@keyframes b${t}-spin { \nfrom { transform: rotate3d(${i[0]}, ${i[1]}, ${i[2]}, 0deg); }\nto { transform: rotate3d(${i[0]}, ${i[1]}, ${i[2]}, 360deg); }\n}\n@keyframes floor-rot { \nto { transform: rotateZ(360deg); }\n}\n@keyframes b${t}-translate { \nto { transform: translateZ(${2*s}px); left: ${x[t].location[0]+e}px; }\n}\n@keyframes b${t}-size { \n0% { transform: scale3d(0.1, 0.1, 0.1); }\n3.3% { transform: scale3d(0.5, 0.5, 0.5); }\n33.3% { transform: scale3d(1, 1, 1); }\n}`},A=(t,n)=>{const e=g.fracArray[q()];return Math.floor((1-e)*t+e*(n+1))},I=(t,n)=>{const e=g.fracArray[q()]+.5/256;return(1-e)*t+e*n},q=()=>(f===g.fracArray.length-1?h="decr":0===f&&(h="incr"),"incr"===h?f++:f--),N=()=>{u.numberOfBubbles=A($[0],$[1]),u.floorRotPeriod=15*A(0,3);const t=A(1,3);let n=["cube","tetra","dodec"];3!==t&&n.splice(A(-1,1),1),1===t&&n.splice(A(0,1),1),u.bubbleTypes=n,u.bgBaseColor=S(z(),-100),u.spinPause=A(1,5)<5},R=t=>{const n=[],e=[],a=t.slice(2);for(let t=0;t<63;t++){const r=a.slice(t,t+2);n[t]=r,e[t]=parseInt(r,16)/256}g.hexArray=n,g.fracArray=e},z=()=>{let t="#";for(let n=0;n<3;n++)t+=g.hexArray[q()];return t},S=(t,n)=>{t=t.slice(1);let e="#";for(;t.length>1;){let a=parseInt(t.substring(0,2),16)+n;a=a>255?255:a<0?0:a,tempColorHex=a.toString(16),e+=2===tempColorHex.length?tempColorHex:"0"+tempColorHex,t=t.slice(2)}return e},X=()=>{const t=u.numberOfBubbles,n=i/2,e=d/2,r=I(a(-45),a(45)),o=a(360/t);let s=[];for(let a=0;a<t;a++){const t=A(l/4,l),i=r+a*o;s.push([n+t*Math.sin(i),e+t*Math.cos(i)])}for(let n=0;n<t;n++)x[n]={},x[n].bubbleType=u.bubbleTypes[n%u.bubbleTypes.length],x[n].location=s[n]};async function O(){const t=u.numberOfBubbles,n=I(c[0],c[1]);setTimeout(W,1e4);for(let e=0;e<t;e++){const t=A(p[0],p[1]),a=A(b[0],b[1]),r=[g.fracArray[q()],g.fracArray[q()],g.fracArray[q()]],o=I(m[0],m[1]);L(e,t,n,a,r,o);const i=a*A(2*t,3*t)*1e3/(2*s/3*1.72);v(e),y[e]=setInterval(v,i,e),await new Promise((t=>setTimeout(t,1500*g.fracArray[q()])))}}const Y=()=>{const n=document.getElementsByClassName("bubble-tran-datum"),e=t.getBoundingClientRect();for(let t=0;t<n.length;t++){n[t].className.split(" ")[0];if(!M.includes(n[t])){const a=n[t].children[0].children[0].children;for(let r=0;r<a.length;r++){const o=a[r].getBoundingClientRect(),s=a[r].clientHeight;if(o.top+Math.min(o.height,s)>e.top&&o.top<e.bottom){M.push(n[t]);break}}}}},D=()=>{clearInterval(U);const t=document.getElementsByClassName("bubble-tran-datum");for(bubble of t)M.includes(bubble)||bubble.remove()};let U;const W=()=>{for(let t=0;t<u.numberOfBubbles;t++){clearInterval(y[t]);let n=document.body.getElementsByClassName("b"+t+"-tran-datum");for(const t of n)t.style.animationPlayState="paused";n=document.body.getElementsByClassName("b"+t+"-grow-datum");for(const t of n)t.style.animationPlayState="paused";if(u.spinPause){n=document.body.getElementsByClassName("b"+t+"-element");for(const t of n)t.style.animationPlayState="paused"}}U=setInterval(Y,1e3),setTimeout(D,1e3*(u.floorRotPeriod+1))},j=t=>{var n,e;R(t),N(),n=u.bgBaseColor,e=50,Z.innerHTML=`\n* {box-sizing: border-box;position: absolute;}\nbody {margin: 0;padding: 0;}\n#container {\nposition: fixed;\nwidth: ${o}px;\nheight: ${s}px;\ntop: 50%;\nleft: 50%;\nmargin-top: -${o/2}px;\nmargin-left: -${o/2}px;\noverflow: hidden;\nperspective: ${.9*o}px;\nbackground: radial-gradient(circle at bottom,\n${S(n,e)},\n${n});\n}\n#floor-datum {\nwidth: ${i}px;\nheight: ${d}px;\nleft: -${o/3}px;\ntransform-style: preserve-3d;\ntransform: rotateX(90deg);\n}\n#floor {\nwidth: ${i}px;\nheight: ${d}px;\nbackground: radial-gradient(circle at center,\n${S(n,e)}B0,\n${n}B0 70.7%, transparent 70.7%);\ntransform-style: preserve-3d;\nanimation: floor-rot ${u.floorRotPeriod}s linear infinite;\n}`,X(),O()};j(tokenData.hash),window.onresize=()=>location.reload();
    </script>
  </body>
</html>
